<!--index.wxml-->
<view class="container">

  <loading hidden="{{finish}}">loading...</loading>

  <loading hidden="{{personal}}">P loading...</loading>

  <button class="userinfo-avatar" open-type="getUserInfo" bindgetuserinfo="onGetUserInfo" bindtap="onGetOpenid" style="background-image: url({{avatarUrl}})"/>
  
  <!-- Car Page -->
  <view class="itemTemplate" wx:for="{{carlist}}" wx:if="{{page == 1}}">
      <navigator url="../detailsPage/detailsPage?date={{item.date}}&from={{item.from}}&&to={{item.to}}&carType={{item.carType}}&type={{1}}">

            <view class="row">
              <image class="icon-car" src="../../images/calendar.png"/>
              <text class='item-car'>{{item.date}}</text>
            </view>
            <view class="row">
              <image class="icon-car" src="../../images/location.png"/>
              <text class="item-car">{{item.from}} - {{item.to}}</text>
            </view>
            <view class="carBottom">

                <view class='item-left'>
                  <image class="icon-car" src="../../images/project.png"/>
                  <text>{{item.carType}}</text>
                </view>

                <view class="item-right">
                    <image class="icon-car" src="../../images/user.png"/>
                    <text class="usr-count">{{item.count}}</text>
                </view>
            </view>
      </navigator>
  </view>
  <text class="itemTemplate" wx:if="{{page == 1 && carlist.length == 20}}">max carlist</text>

  <!-- Goods Page -->
  <view wx:for="{{exclist}}" wx:if="{{page == 2}}">
    <navigator url="../detailsPage/detailsPage?goods={{item.goods}}&excType={{item.excType}}&type={{2}}">
      <view class='itemTemplate'>
            <view>
              <text class='item'>{{item.goods}}</text>
            </view>
            <view>
              <text class='item'>{{item.excType}}</text>
            </view>
            <view>
              <text class='item'>{{item.count}}</text>
            </view>
      </view>
    </navigator>
  </view>
  <text class="itemTemplate" wx:if="{{page==2 && exclist.length == 20}}">max exclist</text>
  
  <!-- Que Page -->
  <scroll-view class="itemTemplate" wx:for="{{quelist}}" wx:if="{{page == 3}}" data-id="{{item._id}}" bindtap="onRemove" lower-threshold="200">
      <text class="questiontext">{{item.question}}</text>
      <text>\n*******</text>
  </scroll-view>

  <text class="itemTemplate" wx:if="{{page == 3 && quelist.length == 20}}">max quelist</text>

  <!-- Gap -->
  <view class="buttomGap">
  </view>
  
  <!-- Lower buttons page -->

  <view >
      <image bindtap = "toRightPage" class = "toRight" mode="aspectFit" src="../../images/toRight.png"></image>
  </view>

  <view bindtap="toChangePage" id="toPre" >
      <image class="toPrePage" src="../../images/toPre.png"></image>
  </view>

  <view bindtap = "toChangePage" id="toNext" >
      <image class="toNextPage" src="../../images/toNext.png"></image>
  </view>

  <navigator url='../createData/createData?type={{page}}'>
        <image class="createData" src="/images/addButton.png"></image>
  </navigator>


</view>
